# R for travis: see documentation at https://docs.travis-ci.com/user/languages/r
language: r

cache:
  packages: true

# Run for pushes to the master branch only
branches:
  only:
    - master

# List of R packages to install via install.packages
r_packages:
  - covr                                                 # Code coverage support

# List of packages to install from GitHub using devtools::install_github
# r_github_packages:

# List of Bioconductor packages to install
# bioc_packages:

# Forces all WARNINGS from R CMD check to become build failures
warnings_are_errors: true

# Environment variables
env:
  - R_CODECOV=true                                       # Code coverage support

matrix:
  include:
    - os: linux
      addons:
        apt:
          packages:
            - libgit2-dev
    - os: osx
    #   r_build_args: '--no-build-vignettes'
    #   r_check_args: '--ignore-vignettes'

after_success:
  - if [[ "${R_CODECOV}" ]]; then R -e 'covr::codecov()'; fi
